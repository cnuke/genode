<config arch="x86_64">

	<common_routes>
		<service name="ROM" label_last="ld.lib.so"> <parent/> </service>
		<service name="CPU">   <parent/> </service>
		<service name="PD">    <parent/> </service>
		<service name="LOG">   <parent/> </service>
		<service name="Timer"> <parent/> </service>
	</common_routes>

	<start name="fonts_fs" pkg="fonts_fs" priority="-2">
		<route>
			<service name="ROM" label="config">
				<parent label="config -> managed/fonts"/>
			</service>
		</route>
	</start>
	<start name="themed_wm" pkg="themed_wm" priority="-2">
		<route>
			<service name="Gui" label="focus">
				<parent label="focus"/>
			</service>
			<service name="Gui">
				<parent/>
			</service>
			<service name="Report" label_last="shape">
				<parent/>
			</service>
			<service name="Report" label_last="clipboard">
				<parent/>
			</service>
			<service name="ROM" label_last="clipboard">
				<parent/>
			</service>
		</route>
	</start>

	<start name="top_view" pkg="top_view" priority="-1">
		<route>
			<service name="Gui" label="focus">
				<parent label="focus"/>
			</service>
			<service name="Gui">
				<parent/>
			</service>
			<service name="TRACE">
				<parent/>
			</service>
			<service name="File_system" label="fonts">
				<child name="fonts_fs"/>
			</service>
		</route>
	</start>

	<start name="system_clock-pc" pkg="system_clock-pc" priority="-1">
		<route>
			<service name="IRQ">
				<parent/>
			</service>
			<service name="IO_PORT">
				<parent/>
			</service>
		</route>
	</start>

	<start name="black_hole" pkg="black_hole" priority="-2">
		<route/>
	</start>

<!--
	<start name="system_shell" pkg="system_shell" priority="-2">
		<route>
			<service name="Gui">
				<child name="themed_wm"/>
			</service>
			<service name="File_system" label="config">
				<parent label="config"/>
			</service>
			<service name="File_system" label="report">
				<parent label="report"/>
			</service>
			<service name="File_system" label="target">
				<child name="default_fs_rw"/>
			</service>
			<service name="File_system" label="fonts">
				<child name="fonts_fs"/>
			</service>
			<service name="ROM" label="vimrc">
				<parent label="config -> vimrc"/>
			</service>
			<service name="ROM" label="clipboard">
				<child name="themed_wm"/>
			</service>
			<service name="Report" label="clipboard">
				<child name="themed_wm"/>
			</service>
			<service name="RM">
				<parent/>
			</service>
		</route>
	</start>
-->

	<start name="mesa_gpu-cpu" pkg="mesa_gpu-cpu" priority="-2">
		<route>
			<service name="RM">
				<parent/>
			</service>
		</route>
	</start>

	<start name="nvme-0.part_block" pkg="part_block" priority="-2">
		<route>
			<service name="Block">
				<parent label="nvme-0"/>
			</service>
			<service name="Report" label="partitions">
				<parent/>
			</service>
		</route>
	</start>

	<start name="nvme-0.5.fs" pkg="ext2_fs" priority="-2">
		<route>
			<service name="Block">
				<child name="nvme-0.part_block" label="5"/>
			</service>
			<service name="RM">
				<parent/>
			</service>
		</route>
	</start>

	<start name="trace_logger" pkg="trace_logger">
		<route>
			<service name="TRACE">
				<parent/>
			</service>
		</route>
		<config verbose="yes"
		        session_ram="90M"
		        session_arg_buffer="1M"
		        session_parent_levels="3"
		        period_sec="30"
		        default_policy="null"
		        default_buffer="8K">
			<policy label_prefix="init -> runtime -> fuji4_vbox"/>
			<policy label_prefix="kernel" thread="idle"/>
		</config>
	</start>

	<start name="shared_fs"/>
	<start name="fuji4_usb_devices"/>
	<start name="fuji4_fs"/>
<!--
	<start name="fuji4_vbox6_cpu1"/>
	<start name="fuji4_vbox6_cpu4"/>
-->
	<start name="fuji4_vbox6_cpu2"/>

</config>

