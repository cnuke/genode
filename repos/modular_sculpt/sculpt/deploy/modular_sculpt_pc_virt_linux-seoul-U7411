<config arch="x86_64">

	<common_routes>
		<service name="ROM" label_last="ld.lib.so"> <parent/> </service>
		<service name="CPU">   <parent/> </service>
		<service name="PD">    <parent/> </service>
		<service name="LOG">   <parent/> </service>
		<service name="Timer"> <parent/> </service>
	</common_routes>

	<default-route>
		<service name="Timer"> <parent/> </service>
		<any-service> <parent/> <any-child/> </any-service>
	</default-route>

	<start name="acpi_support"/>
	<start name="black_hole"/>
	<start name="system_clock"/>
	<start name="fonts_fs"/>
	<start name="default_recall_fs"/>

	<start name="window_layouter"/>
	<start name="themed_decorator"/>
	<start name="wm"/>

	<start name="top_view" pkg="top_view" priority="-2">
		<route>
			<service name="Gui"> <child name="wm"/> </service>
			<service name="TRACE"> <parent label="global"/> </service>
			<service name="File_system"> <child name="fonts_fs"/> </service>
		</route>
	</start>

	<start name="mesa_gpu-cpu" pkg="mesa_gpu-cpu" priority="-2">
		<route>
			<service name="RM"> <parent/> </service>
		</route>
	</start>

	<start name="touchpad"/>

	<start name="default_fs_shell"/>

	<start name="audio_mixer">
		<route>
			<service name="Audio_out"> <child name="sof_audio"/> </service>
			<service name="Report"> <parent/> </service>
		</route>
	</start>
	<start name="sof_audio"/>

	<start name="nvme"/>
	<start name="storage_nvme"/>

	<start name="iso_block" pkg="iso_block" ram="1G" caps="500">
		<config>
			<vfs>
				<ram/>
				<import>
					<rom name="pc_virt_linux.iso"/>
				</import>
			</vfs>
			<policy label_prefix="vm_pc_virt_linux" file="/pc_virt_linux.iso" block_size="512" writeable="no"/>
		</config>
	</start>

	<start name="ram_block" pkg="ram_block" ram="8G" caps="8000">
		<config>
			<vfs>
				<ram/>
				<import>
					<zero name="block_file" size="7G"/>
				</import>
			</vfs>
			<policy label_prefix="vm_pc_virt_linux" file="/block_file" block_size="512" writeable="yes"/>
		</config>
	</start>


	<start name="rw_fs" pkg="dd_rw_fs"/>

	<start name="vm_pc_virt_linux" pkg="seoul-block-2-boot">
		<affinity xpos="1" ypos="0" width="2" height="2"/>
		<route>
			<service name="File_system" label="rw">       <child name="rw_fs"/> </service>
			<service name="Block" label="disk0">          <child name="ram_block"/> </service>
			<service name="Block" label="disk1">          <child name="iso_block"/> </service>
			<service name="Report" label_last="shape">    <child name="wm"/> </service>
			<service name="Report" label="clipboard">     <child name="wm"/> </service>
			<service name="ROM" label="clipboard">        <child name="wm"/> </service>
			<service name="ROM" label="platform_info">    <parent label="platform_info"/> </service>
			<service name="Gui">                          <child name="wm"/> </service>
			<service name="Nic">                          <child name="nic_router"/> </service>
			<service name="Rtc">                          <child name="system_clock"/> </service>
			<service name="Usb">                          <child name="black_hole"/> </service>
			<service name="VM">                           <parent/> </service>
			<service name="RM">                           <parent/> </service>
		</route>
	</start>

</config>
